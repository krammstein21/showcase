<div class="mx-auto" id="dances">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
  <% end %>

  <h1 class="text-center font-bold text-4xl mb-8">Dances</h1>

  <div class="min-w-full">
  <table class="mx-auto table-fixed">
    <thead>
      <tr>
        <th class="row-head">Dance
        <th class="row-head">Categories
        <th class="row-head">Entries
        <th class="row-head">Heats
      </tr>
    </thead>
    <tbody data-controller="drop" data-drop-action="<%= drop_dances_path %>">
    <% @dances.each do |dance| %>
      <tr draggable="true" data-drag-id="<%= dance.id %>">
        <td class="row text-black font-medium"><%= link_to dance.name, edit_dance_path(dance) %></td>
        <td class="row grid grid-cols-1">
          <%= link_to dance.closed_category&.name, edit_category_path(dance.closed_category) if dance.closed_category %>
          <%= link_to dance.open_category&.name, edit_category_path(dance.open_category) if dance.open_category %>
        </td>
        <td class="row text-right"><%= @entries[dance.id] || 0 %></td>
        <td class="row text-right"><%= @heats[dance.id] || 0 %></td>
      </tr>
    <% end %>
    </tbody>
  </table>

</div>

<div class="mt-4 flex justify-between items-center">
  <%= link_to 'New dance', new_dance_path, class: "btn-blue" %>
  <%= link_to 'Back to Settings', settings_event_index_path, class: "btn-green" %>
</div>
</div>